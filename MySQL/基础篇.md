# **基础架构**
## **一条 SQL 查询语句是如何执行的？**
### **mysql 基本架构**
- 大体来说， MySQL 可以分为 Server 层和存储引擎层两部分
- server 层包括：**连接器、查询缓存、分析器、优化器、执行器** 涵盖 MySQL 的大多数核心服务功能，以及所有内置函数，所有跨存储引擎的功能都在这一层实现，比如存储过程、触发器、视图等
- 存储引擎层负责数据的存储和提取。其架构是插件式的，支持 **InnoDB、MyISAM、Memory** 等多个存储引擎。最常见的是 InnoDB。 MySQL 5.5 版本开始 InnoDB 作为默认的存储引擎
- 从基本架构看出，不同存储引擎共用一个 **Server 层**

### **连接器**
- 连接器负责跟客户端建立连接、获取权限、维持和管理连接。
    > 建立连接步骤：
    > 1. 连接命令： ```mysql -h$host -P$port -u$user -p$pwd``` 可以 -p 后省略 在后续交互对话中填写密码，防止密码泄露
    > 2. 如果用户名或密码错误，会收到 Access denied for user 的错误，客户端程序结束执行
    > 3. 如果认证通过 连接器会到权限表里面查出你拥有的权限。之后这个连接里面的权限判断逻辑都将依赖于此时读到的权限
    > 4. 连接完成后，如果没有后续动作，该连接就处于空闲状态，可以在 ```show processlist ``` 命令中看到它，Command 列显示为 Sleep
    > 5. 如果客户端太长时间没有动静，连接器会自动断开，这个时间由参数 wait_timeout 控制 默认值 8 小时
- 长连接与短连接：长连接建立连接的过程比较复杂



# 系统日志
## 一条 SQL 更新语句是如何执行的？

# 事务隔离：为什么你改了我还看不见？

# 深入浅出索引

# 全局锁和表锁

# 行锁
